2014/06/04 11:55:27 [error] [exception.CException] exception 'CException' with message 'В классе Oms и его поведениях не найден метод или замыкание с именем "getNumRows".' in Z:\home\mis.my\yii\base\CComponent.php:266
Stack trace:
#0 Z:\home\mis.my\yii\db\ar\CActiveRecord.php(227): CComponent->__call('getNumRows', Array)
#1 Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php(781): CActiveRecord->__call('getNumRows', Array)
#2 Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php(781): Oms->getNumRows(Array, false, false, false, false, true, false, false)
#3 Z:\home\mis.my\yii\web\actions\CInlineAction.php(49): PatientController->actionSearch()
#4 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#5 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#6 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#7 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#8 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#9 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#10 Z:\home\mis.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#11 Z:\home\mis.my\yii\web\CWebApplication.php(282): CController->run('search')
#12 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController('reception/patie...')
#13 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#14 Z:\home\mis.my\www\index.php(13): CApplication->run()
#15 {main}
REQUEST_URI=/index.php/reception/patient/search/?withonly=0&filters={%22groupOp%22:%22AND%22,%22rules%22:[{%22field%22:%22oms_number%22,%22op%22:%22eq%22,%22data%22:%22123-456-7%22},{%22field%22:%22first_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22middle_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22last_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22address_reg_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22address_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22card_number%22,%22op%22:%22bw%22,%22data%22:%22%22},{%22field%22:%22serie%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22docnumber%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22snils%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22birthday%22,%22op%22:%22eq%22,%22data%22:%22%22}]}&rows=15&page=1&sidx=oms_number&sord=desc&_=1401866918065
HTTP_REFERER=http://mis.my/index.php/reception/patient/viewsearch
---
2014/06/04 11:55:27 [error] [exception.CException] exception 'CException' with message 'В классе Oms и его поведениях не найден метод или замыкание с именем "getNumRows".' in Z:\home\mis.my\yii\base\CComponent.php:266
Stack trace:
#0 Z:\home\mis.my\yii\db\ar\CActiveRecord.php(227): CComponent->__call('getNumRows', Array)
#1 Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php(781): CActiveRecord->__call('getNumRows', Array)
#2 Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php(781): Oms->getNumRows(Array, false, false, false, false, false, true, false)
#3 Z:\home\mis.my\yii\web\actions\CInlineAction.php(49): PatientController->actionSearch()
#4 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#5 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#6 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#7 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#8 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#9 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#10 Z:\home\mis.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#11 Z:\home\mis.my\yii\web\CWebApplication.php(282): CController->run('search')
#12 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController('reception/patie...')
#13 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#14 Z:\home\mis.my\www\index.php(13): CApplication->run()
#15 {main}
REQUEST_URI=/index.php/reception/patient/search/?withoutonly=0&filters={%22groupOp%22:%22AND%22,%22rules%22:[{%22field%22:%22oms_number%22,%22op%22:%22eq%22,%22data%22:%22123-456-7%22},{%22field%22:%22first_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22middle_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22last_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22address_reg_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22address_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22card_number%22,%22op%22:%22bw%22,%22data%22:%22%22},{%22field%22:%22serie%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22docnumber%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22snils%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22birthday%22,%22op%22:%22eq%22,%22data%22:%22%22}]}&rows=15&page=1&sidx=oms_number&sord=desc&_=1401866918066
HTTP_REFERER=http://mis.my/index.php/reception/patient/viewsearch
---
2014/06/04 13:07:40 [error] [system.db.CDbCommand] Не удалось выполнить CDbCommand::fetchAll(): SQLSTATE[42P10]: Invalid column reference: 7 ОШИБКА:  в конструкции SELECT DISTINCT выражения ORDER BY должны быть в списке выборки
LINE 5: ORDER BY "oms_number" DESC LIMIT 15
                 ^. Выполнявшийся SQL-запрос: SELECT DISTINCT "o"."id"
FROM "mis"."oms" "o"
LEFT JOIN "mis"."medcards" "m" ON o.id = m.policy_id
WHERE (o.oms_number = :oms_number) AND (coalesce(m.card_number,'')!='')
ORDER BY "oms_number" DESC LIMIT 15.
in Z:\home\mis.my\www\protected\models\Oms.php (179)
in Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php (785)
in Z:\home\mis.my\www\protected\components\Controller.php (33)
2014/06/04 13:07:40 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand не удалось исполнить SQL-запрос: SQLSTATE[42P10]: Invalid column reference: 7 ОШИБКА:  в конструкции SELECT DISTINCT выражения ORDER BY должны быть в списке выборки
LINE 5: ORDER BY "oms_number" DESC LIMIT 15
                 ^. The SQL statement executed was: SELECT DISTINCT "o"."id"
FROM "mis"."oms" "o"
LEFT JOIN "mis"."medcards" "m" ON o.id = m.policy_id
WHERE (o.oms_number = :oms_number) AND (coalesce(m.card_number,'')!='')
ORDER BY "oms_number" DESC LIMIT 15' in Z:\home\mis.my\yii\db\CDbCommand.php:543
Stack trace:
#0 Z:\home\mis.my\yii\db\CDbCommand.php(396): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 Z:\home\mis.my\www\protected\models\Oms.php(179): CDbCommand->queryAll()
#2 Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php(785): Oms->getRows(Array, 'oms_number', 'desc', 0, '15', true, false, false)
#3 Z:\home\mis.my\yii\web\actions\CInlineAction.php(49): PatientController->actionSearch()
#4 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#5 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#6 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#7 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#8 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#9 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#10 Z:\home\mis.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#11 Z:\home\mis.my\yii\web\CWebApplication.php(282): CController->run('search')
#12 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController('reception/patie...')
#13 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#14 Z:\home\mis.my\www\index.php(13): CApplication->run()
#15 {main}
REQUEST_URI=/index.php/reception/patient/search/?withonly=0&filters={%22groupOp%22:%22AND%22,%22rules%22:[{%22field%22:%22oms_number%22,%22op%22:%22eq%22,%22data%22:%22123-456-7%22},{%22field%22:%22first_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22middle_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22last_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22address_reg_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22address_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22card_number%22,%22op%22:%22bw%22,%22data%22:%22%22},{%22field%22:%22serie%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22docnumber%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22snils%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22birthday%22,%22op%22:%22eq%22,%22data%22:%22%22}]}&rows=15&page=1&sidx=oms_number&sord=desc&_=1401872855370
HTTP_REFERER=http://mis.my/index.php/reception/patient/viewsearch
---
2014/06/04 13:07:40 [error] [system.db.CDbCommand] Не удалось выполнить CDbCommand::fetchAll(): SQLSTATE[42P10]: Invalid column reference: 7 ОШИБКА:  в конструкции SELECT DISTINCT выражения ORDER BY должны быть в списке выборки
LINE 5: ORDER BY "oms_number" DESC LIMIT 15
                 ^. Выполнявшийся SQL-запрос: SELECT DISTINCT "o"."id"
FROM "mis"."oms" "o"
LEFT JOIN "mis"."medcards" "m" ON o.id = m.policy_id
WHERE (o.oms_number = :oms_number) AND (coalesce(m.card_number,'')='')
ORDER BY "oms_number" DESC LIMIT 15.
in Z:\home\mis.my\www\protected\models\Oms.php (179)
in Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php (785)
in Z:\home\mis.my\www\protected\components\Controller.php (33)
2014/06/04 13:07:40 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand не удалось исполнить SQL-запрос: SQLSTATE[42P10]: Invalid column reference: 7 ОШИБКА:  в конструкции SELECT DISTINCT выражения ORDER BY должны быть в списке выборки
LINE 5: ORDER BY "oms_number" DESC LIMIT 15
                 ^. The SQL statement executed was: SELECT DISTINCT "o"."id"
FROM "mis"."oms" "o"
LEFT JOIN "mis"."medcards" "m" ON o.id = m.policy_id
WHERE (o.oms_number = :oms_number) AND (coalesce(m.card_number,'')='')
ORDER BY "oms_number" DESC LIMIT 15' in Z:\home\mis.my\yii\db\CDbCommand.php:543
Stack trace:
#0 Z:\home\mis.my\yii\db\CDbCommand.php(396): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 Z:\home\mis.my\www\protected\models\Oms.php(179): CDbCommand->queryAll()
#2 Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php(785): Oms->getRows(Array, 'oms_number', 'desc', 0, '15', false, true, false)
#3 Z:\home\mis.my\yii\web\actions\CInlineAction.php(49): PatientController->actionSearch()
#4 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#5 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#6 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#7 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#8 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#9 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#10 Z:\home\mis.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#11 Z:\home\mis.my\yii\web\CWebApplication.php(282): CController->run('search')
#12 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController('reception/patie...')
#13 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#14 Z:\home\mis.my\www\index.php(13): CApplication->run()
#15 {main}
REQUEST_URI=/index.php/reception/patient/search/?withoutonly=0&filters={%22groupOp%22:%22AND%22,%22rules%22:[{%22field%22:%22oms_number%22,%22op%22:%22eq%22,%22data%22:%22123-456-7%22},{%22field%22:%22first_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22middle_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22last_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22address_reg_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22address_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22card_number%22,%22op%22:%22bw%22,%22data%22:%22%22},{%22field%22:%22serie%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22docnumber%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22snils%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22birthday%22,%22op%22:%22eq%22,%22data%22:%22%22}]}&rows=15&page=1&sidx=oms_number&sord=desc&_=1401872855371
HTTP_REFERER=http://mis.my/index.php/reception/patient/viewsearch
---
2014/06/04 13:09:43 [error] [php] Undefined index: id (Z:\home\mis.my\www\protected\models\Oms.php:253)
Stack trace:
#0 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams()
#1 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): PatientController->runAction()
#2 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#3 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): PatientController->filterGetAccessHierarchy()
#4 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter()
#5 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#6 Z:\home\mis.my\yii\web\CController.php(265): PatientController->runActionWithFilters()
#7 Z:\home\mis.my\yii\web\CWebApplication.php(282): PatientController->run()
#8 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController()
#9 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#10 Z:\home\mis.my\www\index.php(13): CWebApplication->run()
REQUEST_URI=/index.php/reception/patient/search/?withonly=0&filters={%22groupOp%22:%22AND%22,%22rules%22:[{%22field%22:%22oms_number%22,%22op%22:%22eq%22,%22data%22:%22123-456-7%22},{%22field%22:%22first_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22middle_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22last_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22address_reg_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22address_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22card_number%22,%22op%22:%22bw%22,%22data%22:%22%22},{%22field%22:%22serie%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22docnumber%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22snils%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22birthday%22,%22op%22:%22eq%22,%22data%22:%22%22}]}&rows=15&page=1&sidx=oms_number&sord=desc&_=1401872977193
in Z:\home\mis.my\www\protected\models\Oms.php (253)
in Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php (785)
in Z:\home\mis.my\www\protected\components\Controller.php (33)
2014/06/04 13:16:47 [error] [php] Undefined index: reg_date (Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php:789)
Stack trace:
#0 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): PatientController->runAction()
#1 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#2 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): PatientController->filterGetAccessHierarchy()
#3 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter()
#4 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#5 Z:\home\mis.my\yii\web\CController.php(265): PatientController->runActionWithFilters()
#6 Z:\home\mis.my\yii\web\CWebApplication.php(282): PatientController->run()
#7 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController()
#8 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#9 Z:\home\mis.my\www\index.php(13): CWebApplication->run()
REQUEST_URI=/index.php/reception/patient/search/?withonly=0&filters={%22groupOp%22:%22AND%22,%22rules%22:[{%22field%22:%22oms_number%22,%22op%22:%22eq%22,%22data%22:%22123-456-7%22},{%22field%22:%22first_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22middle_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22last_name%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22address_reg_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22address_str%22,%22op%22:%22cn%22,%22data%22:%22%22},{%22field%22:%22card_number%22,%22op%22:%22bw%22,%22data%22:%22%22},{%22field%22:%22serie%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22docnumber%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22snils%22,%22op%22:%22eq%22,%22data%22:%22%22},{%22field%22:%22birthday%22,%22op%22:%22eq%22,%22data%22:%22%22}]}&rows=15&page=1&sidx=oms_number&sord=desc&_=1401873404696
in Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php (789)
in Z:\home\mis.my\www\protected\components\Controller.php (33)
in Z:\home\mis.my\www\index.php (13)
