2014/05/19 18:06:47 [error] [system.db.CDbCommand] Не удалось выполнить CDbCommand::fetchAll(): SQLSTATE[22007]: Invalid datetime format: 7 ОШИБКА:  неверный синтаксис для типа date: "..". Выполнявшийся SQL-запрос: SELECT DISTINCT dsbd.*, CONCAT(o.last_name, ' ', o.first_name, ' ', o.middle_name ) as fio, m.card_number AS card_number, SUBSTR(CAST(dsbd.patient_time AS text), 0, CHAR_LENGTH(CAST(dsbd.patient_time AS text)) - 2) AS patient_time, m.motion
FROM "mis"."doctor_shedule_by_day" "dsbd"
LEFT JOIN "mis"."medcards" "m" ON dsbd.medcard_id = m.card_number
LEFT JOIN "mis"."oms" "o" ON m.policy_id = o.id
JOIN "mis"."users" "u" ON u.employee_id = dsbd.doctor_id
WHERE dsbd.doctor_id = :doctor_id AND dsbd.patient_day = :patient_day
ORDER BY "dsbd"."patient_time".
in Z:\home\moniiag.my\www\protected\models\SheduleByDay.php (140)
in Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php (678)
in Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php (102)
2014/05/19 18:06:47 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand не удалось исполнить SQL-запрос: SQLSTATE[22007]: Invalid datetime format: 7 ОШИБКА:  неверный синтаксис для типа date: "..". The SQL statement executed was: SELECT DISTINCT dsbd.*, CONCAT(o.last_name, ' ', o.first_name, ' ', o.middle_name ) as fio, m.card_number AS card_number, SUBSTR(CAST(dsbd.patient_time AS text), 0, CHAR_LENGTH(CAST(dsbd.patient_time AS text)) - 2) AS patient_time, m.motion
FROM "mis"."doctor_shedule_by_day" "dsbd"
LEFT JOIN "mis"."medcards" "m" ON dsbd.medcard_id = m.card_number
LEFT JOIN "mis"."oms" "o" ON m.policy_id = o.id
JOIN "mis"."users" "u" ON u.employee_id = dsbd.doctor_id
WHERE dsbd.doctor_id = :doctor_id AND dsbd.patient_day = :patient_day
ORDER BY "dsbd"."patient_time"' in Z:\home\moniiag.my\yii\db\CDbCommand.php:547
Stack trace:
#0 Z:\home\moniiag.my\yii\db\CDbCommand.php(399): CDbCommand->queryInternal('fetchAll', Array, Array, false)
#1 Z:\home\moniiag.my\www\protected\models\SheduleByDay.php(140): CDbCommand->queryAll()
#2 Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php(678): SheduleByDay->getRows('..', 15, true)
#3 Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php(102): SheduleController->getPatientList(15, '..', false)
#4 Z:\home\moniiag.my\yii\web\actions\CInlineAction.php(49): SheduleController->actionView()
#5 Z:\home\moniiag.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#6 Z:\home\moniiag.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#7 Z:\home\moniiag.my\www\protected\components\Controller.php(27): CFilterChain->run()
#8 Z:\home\moniiag.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#9 Z:\home\moniiag.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#10 Z:\home\moniiag.my\yii\web\CController.php(291): CFilterChain->run()
#11 Z:\home\moniiag.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#12 Z:\home\moniiag.my\yii\web\CWebApplication.php(282): CController->run('view')
#13 Z:\home\moniiag.my\yii\web\CWebApplication.php(141): CWebApplication->runController('doctors/shedule...')
#14 Z:\home\moniiag.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#15 Z:\home\moniiag.my\www\index.php(13): CApplication->run()
#16 {main}
REQUEST_URI=/index.php/doctors/shedule/view?cardid=&date=&rowid=619
HTTP_REFERER=http://moniiag.my/index.php/doctors/shedule/view
---
2014/05/19 18:07:19 [error] [system.db.CDbCommand] Не удалось выполнить CDbCommand::fetchAll(): SQLSTATE[22007]: Invalid datetime format: 7 ОШИБКА:  неверный синтаксис для типа date: "..". Выполнявшийся SQL-запрос: SELECT DISTINCT dsbd.*, CONCAT(o.last_name, ' ', o.first_name, ' ', o.middle_name ) as fio, m.card_number AS card_number, SUBSTR(CAST(dsbd.patient_time AS text), 0, CHAR_LENGTH(CAST(dsbd.patient_time AS text)) - 2) AS patient_time, m.motion
FROM "mis"."doctor_shedule_by_day" "dsbd"
LEFT JOIN "mis"."medcards" "m" ON dsbd.medcard_id = m.card_number
LEFT JOIN "mis"."oms" "o" ON m.policy_id = o.id
JOIN "mis"."users" "u" ON u.employee_id = dsbd.doctor_id
WHERE dsbd.doctor_id = :doctor_id AND dsbd.patient_day = :patient_day
ORDER BY "dsbd"."patient_time".
in Z:\home\moniiag.my\www\protected\models\SheduleByDay.php (140)
in Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php (678)
in Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php (102)
2014/05/19 18:07:19 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand не удалось исполнить SQL-запрос: SQLSTATE[22007]: Invalid datetime format: 7 ОШИБКА:  неверный синтаксис для типа date: "..". The SQL statement executed was: SELECT DISTINCT dsbd.*, CONCAT(o.last_name, ' ', o.first_name, ' ', o.middle_name ) as fio, m.card_number AS card_number, SUBSTR(CAST(dsbd.patient_time AS text), 0, CHAR_LENGTH(CAST(dsbd.patient_time AS text)) - 2) AS patient_time, m.motion
FROM "mis"."doctor_shedule_by_day" "dsbd"
LEFT JOIN "mis"."medcards" "m" ON dsbd.medcard_id = m.card_number
LEFT JOIN "mis"."oms" "o" ON m.policy_id = o.id
JOIN "mis"."users" "u" ON u.employee_id = dsbd.doctor_id
WHERE dsbd.doctor_id = :doctor_id AND dsbd.patient_day = :patient_day
ORDER BY "dsbd"."patient_time"' in Z:\home\moniiag.my\yii\db\CDbCommand.php:547
Stack trace:
#0 Z:\home\moniiag.my\yii\db\CDbCommand.php(399): CDbCommand->queryInternal('fetchAll', Array, Array, false)
#1 Z:\home\moniiag.my\www\protected\models\SheduleByDay.php(140): CDbCommand->queryAll()
#2 Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php(678): SheduleByDay->getRows('..', 15, true)
#3 Z:\home\moniiag.my\www\protected\modules\doctors\controllers\SheduleController.php(102): SheduleController->getPatientList(15, '..', false)
#4 Z:\home\moniiag.my\yii\web\actions\CInlineAction.php(49): SheduleController->actionView()
#5 Z:\home\moniiag.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#6 Z:\home\moniiag.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#7 Z:\home\moniiag.my\www\protected\components\Controller.php(27): CFilterChain->run()
#8 Z:\home\moniiag.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#9 Z:\home\moniiag.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#10 Z:\home\moniiag.my\yii\web\CController.php(291): CFilterChain->run()
#11 Z:\home\moniiag.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#12 Z:\home\moniiag.my\yii\web\CWebApplication.php(282): CController->run('view')
#13 Z:\home\moniiag.my\yii\web\CWebApplication.php(141): CWebApplication->runController('doctors/shedule...')
#14 Z:\home\moniiag.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#15 Z:\home\moniiag.my\www\index.php(13): CApplication->run()
#16 {main}
REQUEST_URI=/index.php/doctors/shedule/view?cardid=2493/14&date=&rowid=618
HTTP_REFERER=http://moniiag.my/index.php/doctors/shedule/view
---
