2014/06/02 13:50:16 [error] [system.db.CDbCommand] Не удалось выполнить CDbCommand::fetchAll(): SQLSTATE[42703]: Undefined column: 7 ОШИБКА:  колонка dsbd.order_number не существует
LINE 12: ...bd.doctor_id = $1 AND dsbd.patient_day = $2) AND (dsbd.order...
                                                              ^. Выполнявшийся SQL-запрос: SELECT DISTINCT dsbd.*,
                            CONCAT(o.last_name, ' ', o.first_name, ' ', o.middle_name ) as fio,
                            m.card_number AS card_number,
                            SUBSTR(CAST(dsbd.patient_time AS text),
                            0, CHAR_LENGTH(CAST(dsbd.patient_time AS text)) - 2) AS patient_time,
                            m.motion
FROM "mis"."doctor_shedule_by_day" "dsbd"
LEFT JOIN "mis"."medcards" "m" ON dsbd.medcard_id = m.card_number
LEFT JOIN "mis"."oms" "o" ON m.policy_id = o.id
LEFT JOIN "mis"."users" "u" ON u.employee_id = dsbd.doctor_id
LEFT JOIN "mis"."mediate_patients" "mdp" ON mdp.id = dsbd.mediate_id
WHERE (dsbd.doctor_id = :doctor_id AND dsbd.patient_day = :patient_day) AND (dsbd.order_number IS NULL)
ORDER BY "dsbd"."patient_time".
in Z:\home\mis.my\www\protected\models\SheduleByDay.php (215)
in Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php (781)
in Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php (118)
2014/06/02 13:50:16 [error] [exception.CDbException] exception 'CDbException' with message 'CDbCommand не удалось исполнить SQL-запрос: SQLSTATE[42703]: Undefined column: 7 ОШИБКА:  колонка dsbd.order_number не существует
LINE 12: ...bd.doctor_id = $1 AND dsbd.patient_day = $2) AND (dsbd.order...
                                                              ^. The SQL statement executed was: SELECT DISTINCT dsbd.*,
                            CONCAT(o.last_name, ' ', o.first_name, ' ', o.middle_name ) as fio,
                            m.card_number AS card_number,
                            SUBSTR(CAST(dsbd.patient_time AS text),
                            0, CHAR_LENGTH(CAST(dsbd.patient_time AS text)) - 2) AS patient_time,
                            m.motion
FROM "mis"."doctor_shedule_by_day" "dsbd"
LEFT JOIN "mis"."medcards" "m" ON dsbd.medcard_id = m.card_number
LEFT JOIN "mis"."oms" "o" ON m.policy_id = o.id
LEFT JOIN "mis"."users" "u" ON u.employee_id = dsbd.doctor_id
LEFT JOIN "mis"."mediate_patients" "mdp" ON mdp.id = dsbd.mediate_id
WHERE (dsbd.doctor_id = :doctor_id AND dsbd.patient_day = :patient_day) AND (dsbd.order_number IS NULL)
ORDER BY "dsbd"."patient_time"' in Z:\home\mis.my\yii\db\CDbCommand.php:543
Stack trace:
#0 Z:\home\mis.my\yii\db\CDbCommand.php(396): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 Z:\home\mis.my\www\protected\models\SheduleByDay.php(215): CDbCommand->queryAll()
#2 Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php(781): SheduleByDay->getRows('11.6.2014', 15, true, 0, false)
#3 Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php(118): SheduleController->getPatientList(15, '11.6.2014', false)
#4 Z:\home\mis.my\yii\web\actions\CInlineAction.php(49): SheduleController->actionView()
#5 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams(Array)
#6 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): CController->runAction(Object(CInlineAction))
#7 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#8 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): Controller->filterGetAccessHierarchy(Object(CFilterChain))
#9 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter(Object(CFilterChain))
#10 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#11 Z:\home\mis.my\yii\web\CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#12 Z:\home\mis.my\yii\web\CWebApplication.php(282): CController->run('view')
#13 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController('doctors/shedule...')
#14 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#15 Z:\home\mis.my\www\index.php(13): CApplication->run()
#16 {main}
REQUEST_URI=/index.php/doctors/shedule/view?cardid=1/13&date=2014-6-11&rowid=560
HTTP_REFERER=http://mis.my/index.php/doctors/shedule/view?cardid=1/13&date=2014-6-11&rowid=560
---
2014/06/02 13:52:59 [error] [php] Undefined index: maxInWaitingLine (Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php:825)
Stack trace:
#0 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams()
#1 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): SheduleController->runAction()
#2 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#3 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): SheduleController->filterGetAccessHierarchy()
#4 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter()
#5 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#6 Z:\home\mis.my\yii\web\CController.php(265): SheduleController->runActionWithFilters()
#7 Z:\home\mis.my\yii\web\CWebApplication.php(282): SheduleController->run()
#8 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController()
#9 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#10 Z:\home\mis.my\www\index.php(13): CWebApplication->run()
REQUEST_URI=/index.php/doctors/shedule/updatepatientlist
in Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php (825)
in Z:\home\mis.my\www\protected\modules\doctors\controllers\SheduleController.php (186)
in Z:\home\mis.my\www\protected\components\Controller.php (33)
2014/06/02 13:53:26 [error] [php] Trying to get property of non-object (Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php:1086)
Stack trace:
#0 Z:\home\mis.my\yii\web\actions\CInlineAction.php(47): CInlineAction->runWithParamsInternal()
#1 Z:\home\mis.my\yii\web\CController.php(308): CInlineAction->runWithParams()
#2 Z:\home\mis.my\yii\web\filters\CFilterChain.php(133): PatientController->runAction()
#3 Z:\home\mis.my\www\protected\components\Controller.php(33): CFilterChain->run()
#4 Z:\home\mis.my\yii\web\filters\CInlineFilter.php(58): PatientController->filterGetAccessHierarchy()
#5 Z:\home\mis.my\yii\web\filters\CFilterChain.php(130): CInlineFilter->filter()
#6 Z:\home\mis.my\yii\web\CController.php(291): CFilterChain->run()
#7 Z:\home\mis.my\yii\web\CController.php(265): PatientController->runActionWithFilters()
#8 Z:\home\mis.my\yii\web\CWebApplication.php(282): PatientController->run()
#9 Z:\home\mis.my\yii\web\CWebApplication.php(141): CWebApplication->runController()
#10 Z:\home\mis.my\yii\base\CApplication.php(180): CWebApplication->processRequest()
#11 Z:\home\mis.my\www\index.php(13): CWebApplication->run()
REQUEST_URI=/index.php/reception/patient/writepatientstepone
in Z:\home\mis.my\www\protected\modules\reception\controllers\PatientController.php (1086)
in Z:\home\mis.my\www\protected\components\Controller.php (33)
in Z:\home\mis.my\www\index.php (13)
